@using QRCoder

<h3>QRGenerator</h3>


@if (qrCodeImageAsBase64 == null)
{
    <p>QR code failed to load...</p>
}
else
{

    <div>
        <img alt="Embedded QR Code" src="data:image/bmp;base64,@qrCodeImageAsBase64" width="@size" height="@size" />
    </div>

}


@code {
    private string qrCodeImageAsBase64;


    [Parameter] public string code { get; set; } = null;
    [Parameter] public int size { get; set; } = 100;

    protected override void OnInitialized()
    {
        GenQR();
    }

    private int GenQR()
    {
        QRCodeGenerator qrGenerator = new QRCodeGenerator();
        QRCodeData qrCodeData = qrGenerator.CreateQrCode(code, QRCodeGenerator.ECCLevel.Q);
        Base64QRCode qrCode = new Base64QRCode(qrCodeData);
        qrCodeImageAsBase64 = qrCode.GetGraphic(20, "#cc4545", "#ffffff", true);
        return 1;
    }
}
