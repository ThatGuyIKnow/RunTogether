@using RunTogether.Shared.Etc

@inherits LayoutComponentBase

@inject IJSRuntime JSRuntime

<div class="main">
    <div class="top-row px-4 auth">
        <!-- Sidebar toggle open/close button -->
        <button class="navbar-toggler" @onclick="toggleSidebar">
            <span class="oi oi-menu"></span>
        </button>

        <!-- RunTogether logo -->
        <RadzenImage Path="https://www.runtogether.dk/wp-content/uploads/2020/03/ny-red.png"
                     Style="width:200px" class="logo logo-align-left"></RadzenImage>
    </div>

    <!-- Main content of the page -->
    <div class="content px-4">
        @Body
    </div>
</div>

<!-- Sponsor bar -->
<div class="sidebar" id="sponsorbarId">
    <SponsorBar />
</div>

@code {
    /* Keeps track of whether sidebar is collapsed or not. By default not collapsed */
    bool collapsed = false;

    string sidebarId = "sponsorbarId";

    async Task toggleSidebar()
    {
        collapsed = !collapsed;

        if (collapsed == false) /* Open */
        {
            await JSRuntime.InvokeVoidAsync("Main.sidebar.sidebarToggle",
                new { id = sidebarId, attribute = "width", value = "15rem" });
        }
        else /* Close */
        {
            await JSRuntime.InvokeVoidAsync("Main.sidebar.sidebarToggle",
                new { id = sidebarId, attribute = "width", value = "0" });
        }
    }
}
